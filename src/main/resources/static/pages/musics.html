<!DOCTYPE html><html><head>    <!-- 页面meta -->    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <title>音乐管理</title>    <link rel="shortcut icon" href="../minlogo.ico">    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">    <!-- 引入样式 -->    <link rel="stylesheet" href="../plugins/elementui/index.css">    <link rel="stylesheet" href="../plugins/font-awesome/css/font-awesome.min.css">    <link rel="stylesheet" href="../css/style.css"></head><body class="hold-transition"><div id="app">    <div class="app-container">        <div class="box">            <div class="filter-container">                <el-input placeholder="音乐名" v-model="pagination.musicName" style="width: 160px;" class="filter-item"></el-input>                <el-input placeholder="编号" v-model="pagination.mid" style="width: 80px;" class="filter-item"></el-input>                <el-input placeholder="原作名" v-model="pagination.animeName" style="width: 160px;" class="filter-item"></el-input>                <el-select v-model="pagination.type" filterable placeholder="类型" style="width: 100px;">                    <el-option                            v-for="item in selcetForm.typeDataList"                            :key="item.id"                            :label="item.type"                            :value="item.id">                    </el-option>                </el-select>                <el-select v-model="pagination.time" filterable placeholder="时长" style="width: 100px;">                    <el-option                            v-for="item in timeDataList"                            :key="item.value"                            :label="item.label"                            :value="item.value">                    </el-option>                </el-select>                <el-input placeholder="歌手" v-model="pagination.singer" style="width: 160px;" class="filter-item"></el-input>                <el-select v-model="pagination.score" filterable placeholder="评价" style="width: 100px;">                    <el-option                            v-for="item in scoreDataList"                            :key="item.value"                            :label="item.label"                            :value="item.value">                    </el-option>                </el-select>                <el-select v-model="pagination.form" filterable placeholder="格式" style="width: 100px;">                    <el-option                            v-for="item in formDataList"                            :key="item.value"                            :label="item.label"                            :value="item.value">                    </el-option>                </el-select>                <el-select v-model="pagination.source" filterable placeholder="来源" style="width: 100px;">                    <el-option                            v-for="item in sourceDataList"                            :key="item.value"                            :label="item.label"                            :value="item.value">                    </el-option>                </el-select>                <el-select v-model="pagination.downloadType" filterable placeholder="下载类型" style="width: 120px;">                    <el-option                            v-for="item in selcetForm.downloadTypeDataList"                            :key="item.id"                            :label="item.downloadType"                            :value="item.id">                    </el-option>                </el-select>                <el-select v-model="pagination.addType" filterable placeholder="添加类型" style="width: 120px;">                    <el-option                            v-for="item in selcetForm.addTypeDataList"                            :key="item.id"                            :label="item.addType"                            :value="item.id">                    </el-option>                </el-select>                <el-input placeholder="追番年" v-model="pagination.year" style="width: 100px;" class="filter-item"></el-input>                <el-select v-model="pagination.quarter" filterable placeholder="季度" style="width: 100px;">                    <el-option                            v-for="item in quarters"                            :key="item.value"                            :label="item.label"                            :value="item.value">                    </el-option>                </el-select>                <el-button type="primary" @click="getAll()" class="dalfBut">查询</el-button>                <el-button type="success" class="butT" @click="handleCreate()">新增音乐</el-button>            </div>            <el-table size="big" current-row-key="id" :data="dataList" stripe highlight-current-row><!--                <el-table-column type="index" align="center" label="序号"></el-table-column>-->                <el-table-column prop="mid" label="编号" align="center" width="100"> </el-table-column>                <el-table-column prop="musicName" label="音乐名" align="center" width="260">                    <template scope="scope">                        <span v-if="scope.row.downloadType === '未下载' " style="color:#000000">{{ scope.row.musicName }}</span>                        <span v-else-if="scope.row.downloadType === '已下载'  " style="color: #33ccff">{{ scope.row.musicName }}</span>                        <span v-else-if="scope.row.downloadType === 'VIP无法下载' " style="color:#ff8000">{{ scope.row.musicName }}</span>                        <span v-else-if="scope.row.downloadType === '已下载非完整版' " style="color:#33ff33">{{ scope.row.musicName }}</span>                        <span v-else-if="scope.row.downloadType === '单独种子下载'" style="color:#ff80d4">{{ scope.row.musicName }}</span>                    </template>                </el-table-column>                <el-table-column prop="animeName" label="原作名" align="center" width="260">                    <template scope="scope">                        <span v-if="scope.row.addType === '追新番' && scope.row.quarter ==='冬'" style="color:#00ccff">{{ scope.row.animeName }}</span>                        <span v-else-if="scope.row.addType === '追新番' && scope.row.quarter === '春'" style="color:#00ff00">{{ scope.row.animeName }}</span>                        <span v-else-if="scope.row.addType === '追新番' && scope.row.quarter === '夏'" style="color:red">{{ scope.row.animeName }}</span>                        <span v-else-if="scope.row.addType === '追新番' && scope.row.quarter === '秋'" style="color:#ff9933">{{ scope.row.animeName }}</span>                        <span v-else-if="scope.row.addType === '特殊'" style="color:#7f00ff">{{ scope.row.animeName }}</span>                        <span v-else-if="scope.row.addType === '补旧番'" style="color:#000000">{{ scope.row.animeName }}</span>                    </template>                </el-table-column>                <el-table-column prop="type" label="类型" align="center" width="80"></el-table-column>                <el-table-column prop="time" label="时长" align="center" width="80"></el-table-column>                <el-table-column prop="singer" label="歌手" align="center" width="260"></el-table-column>                <el-table-column prop="score" label="评价" sortable align="center" width="80"></el-table-column>                <el-table-column prop="form" label="格式" align="center" width="90"></el-table-column>                <el-table-column prop="source" label="来源" align="center" width="90"></el-table-column>                <el-table-column prop="downloadType" label="下载类型" align="center" width="100"></el-table-column>                <el-table-column prop="addType" label="添加类型" align="center" width="100"></el-table-column>                <el-table-column prop="bingeTime" label="追番季" align="center" width="100"></el-table-column>                <el-table-column label="操作" align="center" width="400">                    <template slot-scope="scope">                        <el-button type="primary"  @click="handleListenning(scope.row)">音乐鉴赏</el-button>                        <el-button type="warning"  @click="handleUpdate(scope.row)">编辑音乐</el-button>                        <el-button type="danger" @click="handleReconfirm(scope.row)">删除音乐</el-button>                    </template>                </el-table-column>            </el-table>            <!-- 新增标签弹层 -->            <div class="add-form">                <el-dialog title="新增音乐" :visible.sync="dialogFormVisible">                    <el-form ref="dataAddForm" :model="formData" :rules="rules" label-position="right" label-width="100px">                        <el-row>                            <el-col :span="12">                                <el-form-item label="音乐名" prop="musicName">                                    <el-input v-model="formData.musicName"/>                                </el-form-item>                            </el-col>                            <el-col :span="12">                                <el-form-item label="原作名" prop="animeName">                                    <el-input v-model="formData.animeName"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="音乐类型">                                <el-select v-model="formData.type" placeholder="类型" size="small">                                    <el-option                                            v-for="item in selcetForm.typeDataList"                                            :key="item.id"                                            :label="item.type"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item><!--                            <el-form-item label="音乐时长">--><!--                                <el-select v-model="formData.time" placeholder="时长" size="small">--><!--                                    <el-option--><!--                                            v-for="item in timeDataList"--><!--                                            :key="item.value"--><!--                                            :label="item.label"--><!--                                            :value="item.value">--><!--                                    </el-option>--><!--                                </el-select>--><!--                            </el-form-item>-->                        </el-row>                        <el-row>                            <el-col :span="24">                                <el-form-item label="歌手名" prop="singer">                                    <el-input type="textarea" v-model="formData.singer"/>                                </el-form-item>                            </el-col>                        </el-row><!--                        <el-row>                            <el-form-item label="音乐评价">                                <el-select v-model="formData.score" placeholder="评价" size="small">                                    <el-option                                            v-for="item in scoreDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐格式">                                <el-select v-model="formData.form" placeholder="格式" size="small">                                    <el-option                                            v-for="item in formDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐来源">                                <el-select v-model="formData.source" placeholder="来源" size="small">                                    <el-option                                            v-for="item in sourceDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>-->                        <el-row><!--                            <el-form-item label="下载类型">                                <el-select v-model="formData.downloadType" placeholder="下载类型" size="small">                                    <el-option                                            v-for="item in selcetForm.downloadTypeDataList"                                            :key="item.id"                                            :label="item.downloadType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>-->                            <el-form-item label="添加类型">                                <el-select v-model="formData.addType" placeholder="添加类型" size="small">                                    <el-option                                            v-for="item in selcetForm.addTypeDataList"                                            :key="item.id"                                            :label="item.addType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="追番年" prop="year">                                    <el-input v-model="formData.year"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="追番季">                                <el-select v-model="formData.quarter" placeholder="添加季度" size="small">                                    <el-option                                            v-for="item in quarters"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                    </el-form>                    <div slot="footer" class="dialog-footer">                        <el-button @click="cancel()">取消</el-button>                        <el-button type="primary" @click="handleAdd()">确定</el-button>                    </div>                </el-dialog>            </div>            <!-- 编辑鉴赏弹层 -->            <div class="add-form">                <el-dialog title="鉴赏音乐" :visible.sync="dialogFormVisible4Listen">                    <el-form ref="dataEditForm" :model="formData" :rules="rules" label-position="right" label-width="100px">                        <el-row>                            <el-form-item label="音乐类型">                                <el-select v-model="formData.type" placeholder="类型" size="small">                                    <el-option                                            v-for="item in selcetForm.typeDataList"                                            :key="item.id"                                            :label="item.type"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐时长">                                <el-select v-model="formData.time" placeholder="时长" size="small">                                    <el-option                                            v-for="item in timeDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-form-item label="音乐评价">                                <el-select v-model="formData.score" placeholder="评价" size="small">                                    <el-option                                            v-for="item in scoreDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐格式">                                <el-select v-model="formData.form" placeholder="格式" size="small">                                    <el-option                                            v-for="item in formDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-form-item label="音乐来源">                                <el-select v-model="formData.source" placeholder="来源" size="small">                                    <el-option                                            v-for="item in sourceDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="下载类型">                                <el-select v-model="formData.downloadType" placeholder="下载类型" size="small">                                    <el-option                                            v-for="item in selcetForm.downloadTypeDataList"                                            :key="item.id"                                            :label="item.downloadType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                    </el-form>                    <div slot="footer" class="dialog-footer">                        <el-button @click="cancel()">取消</el-button>                        <el-button type="primary" @click="handleListened()">确定</el-button>                    </div>                </el-dialog>            </div>            <!-- 编辑标签弹层 -->            <div class="add-form">                <el-dialog title="编辑检查项" :visible.sync="dialogFormVisible4Edit">                    <el-form ref="dataEditForm" :model="formData" :rules="rules" label-position="right" label-width="100px">                        <el-row>                            <el-col :span="12">                                <el-form-item label="音乐名" prop="musicName">                                    <el-input v-model="formData.musicName"/>                                </el-form-item>                            </el-col>                            <el-col :span="12">                                <el-form-item label="原作名" prop="animeName">                                    <el-input v-model="formData.animeName"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="音乐类型">                                <el-select v-model="formData.type" placeholder="类型" size="small">                                    <el-option                                            v-for="item in selcetForm.typeDataList"                                            :key="item.id"                                            :label="item.type"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐时长">                                <el-select v-model="formData.time" placeholder="时长" size="small">                                    <el-option                                            v-for="item in timeDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-col :span="24">                                <el-form-item label="歌手名" prop="singer">                                    <el-input type="textarea" v-model="formData.singer"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="音乐评价">                                <el-select v-model="formData.score" placeholder="评价" size="small">                                    <el-option                                            v-for="item in scoreDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐格式">                                <el-select v-model="formData.form" placeholder="格式" size="small">                                    <el-option                                            v-for="item in formDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐来源">                                <el-select v-model="formData.source" placeholder="来源" size="small">                                    <el-option                                            v-for="item in sourceDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-form-item label="下载类型">                                <el-select v-model="formData.downloadType" placeholder="下载类型" size="small">                                    <el-option                                            v-for="item in selcetForm.downloadTypeDataList"                                            :key="item.id"                                            :label="item.downloadType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="添加类型">                                <el-select v-model="formData.addType" placeholder="添加类型" size="small">                                    <el-option                                            v-for="item in selcetForm.addTypeDataList"                                            :key="item.id"                                            :label="item.addType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="追番年" prop="year">                                    <el-input v-model="formData.year"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="追番季">                                <el-select v-model="formData.quarter" placeholder="添加季度" size="small">                                    <el-option                                            v-for="item in quarters"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                    </el-form>                    <div slot="footer" class="dialog-footer">                        <el-button @click="cancel()">取消</el-button>                        <el-button type="primary" @click="handleEdit()">确定</el-button>                    </div>                </el-dialog>            </div>            <!-- 删除标签弹层 -->            <div class="add-form">                <el-dialog title="编辑检查项" :visible.sync="dialogFormVisible4Reconfirm">                    <el-form ref="dataEditForm" :model="formData" :rules="rules" label-position="right" label-width="100px">                        <el-row>                            <el-col :span="12">                                <el-form-item label="音乐名" prop="musicName">                                    <el-input :disabled="true" v-model="formData.musicName"/>                                </el-form-item>                            </el-col>                            <el-col :span="12">                                <el-form-item label="原作名" prop="animeName">                                    <el-input :disabled="true" v-model="formData.animeName"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="音乐类型">                                <el-select :disabled="true" v-model="formData.type" placeholder="类型" size="small">                                    <el-option                                            v-for="item in selcetForm.typeDataList"                                            :key="item.id"                                            :label="item.type"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐时长">                                <el-select :disabled="true" v-model="formData.time" placeholder="时长" size="small">                                    <el-option                                            v-for="item in timeDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-col :span="24">                                <el-form-item label="歌手名" prop="singer">                                    <el-input :disabled="true" type="textarea" v-model="formData.singer"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="音乐评价">                                <el-select :disabled="true" v-model="formData.score" placeholder="评价" size="small">                                    <el-option                                            v-for="item in scoreDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐格式">                                <el-select :disabled="true" v-model="formData.form" placeholder="格式" size="small">                                    <el-option                                            v-for="item in formDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="音乐来源">                                <el-select :disabled="true" v-model="formData.source" placeholder="来源" size="small">                                    <el-option                                            v-for="item in sourceDataList"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-form-item label="下载类型">                                <el-select :disabled="true" v-model="formData.downloadType" placeholder="下载类型" size="small">                                    <el-option                                            v-for="item in selcetForm.downloadTypeDataList"                                            :key="item.id"                                            :label="item.downloadType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                            <el-form-item label="添加类型">                                <el-select :disabled="true" v-model="formData.addType" placeholder="添加类型" size="small">                                    <el-option                                            v-for="item in selcetForm.addTypeDataList"                                            :key="item.id"                                            :label="item.addType"                                            :value="item.id">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                        <el-row>                            <el-col :span="12">                                <el-form-item label="追番年" prop="year">                                    <el-input :disabled="true" v-model="formData.year"/>                                </el-form-item>                            </el-col>                        </el-row>                        <el-row>                            <el-form-item label="追番季">                                <el-select :disabled="true" v-model="formData.quarter" placeholder="添加类型" size="small">                                    <el-option                                            v-for="item in quarters"                                            :key="item.value"                                            :label="item.label"                                            :value="item.value">                                    </el-option>                                </el-select>                            </el-form-item>                        </el-row>                    </el-form>                    <div slot="footer" class="dialog-footer">                        <el-button @click="cancel()">取消</el-button>                        <el-button type="danger" @click="handleDelete()">确定</el-button>                    </div>                </el-dialog>            </div>        </div>    </div></div></body><!-- 引入组件库 --><script src="../js/vue.js"></script><script src="../plugins/elementui/index.js"></script><script type="text/javascript" src="../js/jquery.min.js"></script><script src="../js/axios-0.18.0.js"></script><script src="../js/request.js"></script><script>    var vue = new Vue({        el: '#app',        data:{            dataList: [],//当前页要展示的列表数据            selcetForm: {//选项框要展示的列表数据                typeDataList: [],                downloadTypeDataList: [],                addTypeDataList: [],                id: ''            },            dialogFormVisible: false,//添加表单是否可见            dialogFormVisible4Edit:false,//编辑表单是否可见            dialogFormVisible4Reconfirm:false,//编辑表单是否可见            dialogFormVisible4Listen:false,//编辑表单是否可见            formData: {},//表单数据            rules: {//校验规则                musicName: [{ required: true, message: '音乐名称为必填项', trigger: 'blur' }],                animeName: [{ required: true, message: '原作名称为必填项', trigger: 'blur' }],                type: [{ required: true, message: '音乐类型为必填项', trigger: 'blur' }],                time: [{ required: true, message: '音乐时长为必填项', trigger: 'blur' }],                singer: [{ required: true, message: '歌手为必填项', trigger: 'blur' }],                score: [{ required: true, message: '评价为必填项', trigger: 'blur' }],                form: [{ required: true, message: '格式为必填项', trigger: 'blur' }],                source: [{ required: true, message: '来源为必填项', trigger: 'blur' }],                downloadType: [{ required: true, message: '下载类型为必填项', trigger: 'blur' }],                addType: [{ required: true, message: '添加类型为必填项', trigger: 'blur' }],            },            pagination: {//分页相关模型数据                mid: "",                musicName: "",                animeName: "",                type: "",                time: "",                singer: "",                score: "",                form: "",                source: "",                downloadType: "",                addType: "",                year: "",                quarter: "",                bingeTime: "",            },            timeDataList: [{                value: '长',                label: '长'            }, {                value: '中',                label: '中'            }, {                value: '短',                label: '短'            }, {                value: '',                label: ''            }            ],            scoreDataList: [{                value: '1',                label: '1'            }, {                value: '2',                label: '2'            }, {                value: '3',                label: '3'            }, {                value: '',                label: ''            }            ],            formDataList: [{                value: 'flac',                label: 'flac'            }, {                value: 'mp3',                label: 'mp3'            }, {                value: '',                label: ''            }            ],            sourceDataList: [{                value: 'QQ',                label: 'QQ'            }, {                value: '网易云',                label: '网易云'            }, {                value: '',                label: ''            }            ],            quarters: [{                value: '01',                label: '冬'            }, {                value: '04',                label: '春'            }, {                value: '07',                label: '夏'            }, {                value: '10',                label: '秋'            },],        },        //钩子函数，VUE对象初始化完成后自动执行        created() {            //调用查询全部数据的操作            this.getAll();            this.getMusicTypes();            this.getDownloadTypes();            this.getAddTypes();        },        methods: {            //分页查询            getAll() {                //组织参数，拼接url请求地址                // console.log(this.pagination.type);                param = "?musicName=" + this.pagination.musicName;                param += "&mid=" + this.pagination.mid;                param += "&animeName=" + this.pagination.animeName;                param += "&type=" + this.pagination.type;                param += "&time=" + this.pagination.time;                param += "&singer=" + this.pagination.singer;                param += "&score=" + this.pagination.score;                param += "&form=" + this.pagination.form;                param += "&source=" + this.pagination.source;                param += "&downloadType=" + this.pagination.downloadType;                param += "&addType=" + this.pagination.addType;                param += "&year=" + this.pagination.year;                param += "&quarter=" + this.pagination.quarter;                //发送异步请求                axios.get("/musics/selectMusicMain"+param).then((res)=>{                    this.dataList = res.data.data;                });            },            getMusicTypes() {                //发送异步请求                axios.get("/musicTypes/1/300").then((res)=>{                    this.selcetForm.typeDataList = res.data.data.records;                });            },            getDownloadTypes() {                //发送异步请求                axios.get("/musicDownloadTypes/1/300").then((res)=>{                    this.selcetForm.downloadTypeDataList = res.data.data.records;                });            },            getAddTypes() {                //发送异步请求                axios.get("/musicAddTypes/1/300").then((res)=>{                    this.selcetForm.addTypeDataList = res.data.data.records;                });            },            //弹出添加窗口            handleCreate() {                this.dialogFormVisible = true;                this.resetForm();            },            //重置表单            resetForm() {                this.formData = {};            },            //添加            handleAdd() {                axios.post("/musics/addMusicMain",this.formData).then((res)=>{                    //判断当前操作是否成功                    if(res.data.flag){                        //1.关闭弹层                        this.dialogFormVisible = false;                        this.$message.success(res.data.msg);                    }else{                        this.$message.error(res.data.msg);                    }                }).finally(()=>{                    //2.重新加载数据                    this.getAll();                });            },            //取消            cancel(){                this.dialogFormVisible = false;                this.dialogFormVisible4Edit = false;                this.dialogFormVisible4Reconfirm = false;                this.dialogFormVisible4Listen = false;                this.$message.info("当前操作取消");            },            //弹出确定删除信息窗口            handleReconfirm(row) {                axios.get("/musics/selectMusicMainById/" + row.id).then((res) => {                    if (res.data.flag && res.data.data != null) {                        this.dialogFormVisible4Reconfirm = true;                        this.formData = res.data.data;                    } else {                        this.$message.error("数据同步失败，自动刷新");                    }                }).finally(() => {                    //2.重新加载数据                    this.getAll();                });            },            // 删除            handleDelete(row) {                // console.log(row);                this.$confirm("此操作永久删除当前音乐，是否继续？","提示",{type:"info"}).then(()=>{                    axios.put("/musics/musicRemove", this.formData).then((res)=>{                        if(res.data.flag){                            this.dialogFormVisible4Reconfirm = false;                            this.$message.success("删除成功");                        }else{                            this.$message.error("数据同步失败，自动刷新");                        }                    }).finally(()=>{                        //2.重新加载数据                        this.getAll();                    });                }).catch(()=>{                    this.$message.info("取消操作");                });            },            //弹出鉴赏窗口            handleListenning(row) {                axios.get("/musics/selectMusicMainById/"+row.id).then((res)=>{                    if(res.data.flag && res.data.data != null ){                        this.dialogFormVisible4Listen = true;                        this.formData = res.data.data;                    }else{                        this.$message.error("数据同步失败，自动刷新");                    }                }).finally(()=>{                    //2.重新加载数据                    this.getAll();                });            },            //确认鉴赏            handleListened() {                this.$confirm("是否鉴赏完此音乐？","提示",{type:"info"}).then(()=>{                    axios.put("/musics/Listened",this.formData).then((res)=>{                        //判断当前操作是否成功                        if(res.data.flag){                            //1.关闭弹层                            this.dialogFormVisible4Listen = false;                            this.$message.success("鉴赏成功");                        }else{                            this.$message.error("鉴赏失败");                        }                    }).finally(()=>{                        //2.重新加载数据                        this.getAll();                    });                }).catch(()=>{                    this.$message.info("取消操作");                });            },            //弹出编辑窗口            handleUpdate(row) {                axios.get("/musics/selectMusicMainById/"+row.id).then((res)=>{                    if(res.data.flag && res.data.data != null ){                        this.dialogFormVisible4Edit = true;                        this.formData = res.data.data;                    }else{                        this.$message.error("数据同步失败，自动刷新");                    }                }).finally(()=>{                    //2.重新加载数据                    this.getAll();                });            },            //修改            handleEdit() {                this.$confirm("是否修改当前信息？","提示",{type:"info"}).then(()=>{                    axios.put("/musics/updateMusicMain",this.formData).then((res)=>{                        //判断当前操作是否成功                        if(res.data.flag){                            //1.关闭弹层                            this.dialogFormVisible4Edit = false;                            this.$message.success("修改成功");                        }else{                            this.$message.error("修改失败");                        }                    }).finally(()=>{                        //2.重新加载数据                        this.getAll();                    });                }).catch(()=>{                    this.$message.info("取消操作");                });            },        }    })</script></html>